<app-new-task></app-new-task>
<app-edit-task></app-edit-task>
<div class="row">
    <div class="col-12 d-flex justify-content-end gap-4">
        <div class="d-flex flex-column gap-2">
            <label for="userSelect">Filter tasks by assigned user</label>
            <select name="" id="userSelect" class="form-select" [(ngModel)]="selectedUserId"
                (change)="filterAndSortTasks()">
                <option value="-1">All users</option>
                <option *ngFor="let user of users_list" [value]="user.id">{{ user.name }}</option>
            </select>
        </div>
        <div class="d-flex flex-column gap-2">
            <label for="taskComponent">Sort tasks by</label>
            <select name="" id="taskComponent" class="form-select" [(ngModel)]="sortValue"
                (change)="filterAndSortTasks()">
                <option value="default">Added to list</option>
                <option *ngFor="let component of task_filter_components" [value]="component">{{ component }}</option>
            </select>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <h1>{{ selectedUserName }}</h1>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <div *ngFor="let status of task_statuses">
            <div class="row">
                <div class="col-12">
                    <h2>{{ status }}</h2>
                </div>
                <div *ngFor="let task of getTasksByStatus(status)" class="col-xs-12 col-md-6 col-lg-3 mb-4">
                    <div class="card">
                        <div class="card-body position-relative">
                            <h5 class="card-title">{{ task.title }}</h5>
                            <p class="card-text">{{ task.description }}</p>
                            <a href="#" (click)="setTaskToEdit(task.id)"
                                class="position-absolute top-1 right-1 w-4 h-4 d-flex align-items-center justify-content-center"
                                data-bs-toggle="modal" data-bs-target="#editTaskModal"><i
                                    class="bi bi-pencil-square text-success display-icon"></i></a>
                        </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between align-center">
                                <span><strong>Assignee</strong></span><span>{{ getUserById(task.assignee_id) }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-center">
                                <span><strong>Task created</strong></span><span>{{ task.date_created }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-center">
                                <span><strong>Task deadline</strong></span><span>{{ task.date_deadline }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-center">
                                <span><strong>Priority</strong></span><span>{{ task.priority }}</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>